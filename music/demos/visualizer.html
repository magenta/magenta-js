<!-- Copyright 2018 Google Inc. All Rights Reserved.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
==============================================================================-->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
  <link rel="stylesheet" href="./style.css">
  <title>Visualizer</title>
  <style>
    input[type="file"] {
      width: 0;
      height: 0;
      opacity: 0;
      cursor: pointer;
      display: none;
    }
  </style>
</head>
<body>
  <h1>Visualizers</h1>
  <p>
    There are several MIDI or <code>NoteSequence</code> visualizers available.
    You can connect it to an <code>mm.Player</code> to update the visualization
    in sync with the audio.
  </p>

  <section>
    <h2>Three visualizers linked to one single player</h2>
    <p>Load a melody in any of these formats:</p>
    <button id="urlBtn">Load URL</button>
    <button id="seqBtn">Load NoteSequence</button>
    <label class="button">
      Load midi file
      <input type="file" id="fileInput">
    </label>
    <br><br>
    <button id="playBtn" disabled>wait...</button>
    <span class="input">
      <b>Tempo:</b>
      <input id="tempoInput" value="100" type="range" min="20" max="240" value="120" step="1">
      <span id="tempoValue"></span>
    </span>

    <h3>mm.PianoRollSVGVisualizer</h3>
    <div class="visualizer-container" id="container1">
      <svg id="piano-roll-svg-viewer"></svg>
    </div>

    <h3>mm.StaffSVGVisualizer</h3>
    <div class="visualizer-container" id="container2">
      <div id="staff-svg-viewer"></div>
    </div>

    <h3>mm.PianoRollCanvasVisualizer</h3>
    <div class="visualizer-container" id="container3">
      <canvas id="piano-roll-canvas-viewer"></canvas>
    </div>
  </section>

  <section>
    <h2>Advanced usage</h2>
    <p>
      mm.StaffSVGVisualizer extends the basic configuration capabilities to add:
      <ul>
        <li>
          Displaying the score in a <b>compact visualization</b> way, just like paper printed 
          scores, by setting config.pixelsPerTimeStep to zero. Otherways music signatures can 
          blink to show first musical symbols in proportional visualization mode.
        </li>
        <li><b>Default Key declaration</b> to adapt the score to the right accidentals.</li>
        <li><b>Instrument Filtering</b> to draw a subset of the NoteSequence tracks.</li>
        <li>
          Follow scoreplaying with two added scroll modes, besides default pagination  
          (<b>ScrollType.PAGE</b> or void), as centering active note in a note by note 
          basis (<b>ScrollType.NOTE</b>) or in bar sized packed chunks (<b>ScrollType.BAR</b>).
        </li>
        <li>
          Multiple <b>key signature</b> and <b>time signature</b> are supported (but notice 
          mm.urlToNoteSequence does not translate them from MIDI files yet).
        </li>
      </ul>
    </p>
    <h3>
      Compact / Proportional visualization, Default Key, Instrument filtering and Scroll on Bar
    </h3>
    Changing visualization makes same score on different mm.StaffSVGVisualizer instances
    draw musical symbols leftmost side in the horizontal position where there should start
    their piano-roll equivalent rectangle (ideal for multiple piled up visualizers). 
    Musical symbols have been scaled up according with the defined 'noteHeight' config value.
    Two tracks of a single score has been filtered in two staffs (left and right hand) which 
    automatically adapt to the right clef according to the note range.
    Visualization mode can be changed during playing, but given there will be a new instance 
    you can experience a fast rewind before scrolling to the next active note.
    <br>
    <br>

    <button id="playBtn2" disabled>wait...</button>
    <span class="input">
      <b>Compact visualization:</b>
      <input type="checkbox" id="visualization2">
      <b>Tempo:</b>
      <input id="tempoInput2" value="100" type="range" min="20" max="240" value="120" step="1">
      <span id="tempoValue2"></span>
    </span>
    <br>
    <br>

    <div class="visualizer-container" id="container4">
      <div id="right-hand"></div>
      <div id="left-hand"></div>
    </div>
    <br>

    <h3>Multiple Key and Time signatures</h3>
    <button id="playBtn3" disabled>wait...</button>
    <button id="growBtn">+</button>
    <span class="input">
      <b>Compact visualization:</b>
      <input type="checkbox" id="visualization3">
      <b>Tempo:</b>
      <input id="tempoInput3" value="100" type="range" min="20" max="240" value="120" step="1">
      <span id="tempoValue3"></span>
    </span>
    <br>
    <br>
    <div class="visualizer-container" id="container5">
      <div id="signatures"></div>
    </div>

  <script src="visualizer_bundle.js"></script>
</body>
</html>
